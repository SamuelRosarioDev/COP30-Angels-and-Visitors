generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./sqlite.db"
}

enum TipoUsuario {
  ANGEL
  VISITOR
}

model Usuario {
  id              Int         @id @default(autoincrement())
  nome            String
  email           String      @unique
  idioma          String?
  cidade          String?
  disponibilidade String?
  tipo            TipoUsuario

  eventosCriados Evento[]       @relation("EventosCriados")
  participacoes  Participacao[] @relation("ParticipacoesFeitas")

  @@map("usuarios")
}

model Evento {
  id       Int    @id @default(autoincrement())
  nome     String
  data     String
  horario  String
  lugar    String
  id_angel Int

  criador       Usuario        @relation("EventosCriados", fields: [id_angel], references: [id])
  participacoes Participacao[]

  @@map("eventos")
}

model Participacao {
  id         Int @id @default(autoincrement())
  id_evento  Int
  id_visitor Int

  evento  Evento  @relation(fields: [id_evento], references: [id])
  visitor Usuario @relation("ParticipacoesFeitas", fields: [id_visitor], references: [id])

  @@map("participacoes")
}
